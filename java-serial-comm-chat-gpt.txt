///////////////////////////////////////////////////////////////////
///i have a device connected to a linux machine via serial to usb. i need a java program to read the input ////from the device
///////////////////////////////////////////////////////////////////

import java.io.*;

public class SerialReader {

    public static void main(String[] args) {
        // Replace "/dev/ttyUSB0" with the appropriate serial port name
        String portName = "/dev/ttyUSB0";
        int baudRate = 9600; // Adjust baud rate as needed
        
        try {
            // Open the serial port
            File serialPortFile = new File(portName);
            FileInputStream inputStream = new FileInputStream(serialPortFile);
            FileOutputStream outputStream = new FileOutputStream(serialPortFile);

            // Create a reader thread to continuously read data from the serial port
            Thread readerThread = new Thread(() -> {
                try {
                    while (true) {
                        // Read data from the serial port
                        if (inputStream.available() > 0) {
                            int data = inputStream.read();
                            System.out.print((char) data);
                        }
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
            });
            readerThread.start();

            // You can also write data to the serial port if needed
            // For example:
            // outputStream.write("Hello".getBytes());

            // Wait for the reader thread to finish
            readerThread.join();
            
            // Close the input and output streams
            inputStream.close();
            outputStream.close();
        } catch (IOException | InterruptedException e) {
            e.printStackTrace();
        }
    }
}

/////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

import java.io.*;

public class SerialReader {

    public static void main(String[] args) {
        // Replace "COM1" with the appropriate serial port name on Windows
        String portName = "COM1";
        int baudRate = 9600; // Adjust baud rate as needed
        
        try {
            // Open the serial port
            File serialPortFile = new File(portName);
            FileInputStream inputStream = new FileInputStream(serialPortFile);
            FileOutputStream outputStream = new FileOutputStream(serialPortFile);

            // Create a reader thread to continuously read data from the serial port
            Thread readerThread = new Thread(() -> {
                try {
                    while (true) {
                        // Read data from the serial port
                        if (inputStream.available() > 0) {
                            int data = inputStream.read();
                            System.out.print((char) data);
                        }
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
            });
            readerThread.start();

            // You can also write data to the serial port if needed
            // For example:
            // outputStream.write("Hello".getBytes());

            // Wait for the reader thread to finish
            readerThread.join();
            
            // Close the input and output streams
            inputStream.close();
            outputStream.close();
        } catch (IOException | InterruptedException e) {
            e.printStackTrace();
        }
    }
}
///////////////////////////////////////////////////////////////////////////////



///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

import java.io.*;
import java.util.*;
import javax.comm.*;

public class SerialReader implements SerialPortEventListener {

    static CommPortIdentifier portId;
    static Enumeration portList;

    InputStream inputStream;
    SerialPort serialPort;
    Thread readThread;

    public static void main(String[] args) {
        portList = CommPortIdentifier.getPortIdentifiers();

        while (portList.hasMoreElements()) {
            portId = (CommPortIdentifier) portList.nextElement();
            if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {
                if (portId.getName().equals("/dev/ttyUSB0")) { // Change this to your port
                    SerialReader reader = new SerialReader();
                }
            }
        }
    }

    public SerialReader() {
        try {
            serialPort = (SerialPort) portId.open("SerialReader", 2000);
            inputStream = serialPort.getInputStream();
            serialPort.addEventListener(this);
            serialPort.notifyOnDataAvailable(true);
            serialPort.setSerialPortParams(9600, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);
            readThread = new Thread(this::readSerial);
            readThread.start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void serialEvent(SerialPortEvent event) {
        switch (event.getEventType()) {
            case SerialPortEvent.DATA_AVAILABLE:
                byte[] readBuffer = new byte[20]; // Adjust buffer size as needed
                try {
                    while (inputStream.available() > 0) {
                        int numBytes = inputStream.read(readBuffer);
                        System.out.print(new String(readBuffer, 0, numBytes));
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
                break;
        }
    }

    public void readSerial() {
        try {
            Thread.sleep(20000); // Adjust sleep time as needed
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

//////////////////////////////////////////////////////////////////////////

import java.io.*;
import java.util.*;

public class SerialReader {

    public static void main(String[] args) {
        // Replace "COM1" with the appropriate serial port name on Windows,
        // or replace "/dev/ttyUSB0" with the appropriate serial port name on Unix-like systems
        String portName = "COM1"; // Windows
        // String portName = "/dev/ttyUSB0"; // Unix-like systems
        int baudRate = 9600; // Adjust baud rate as needed

        try {
            // Open the serial port as a file
            File serialPort = new File(portName);
            FileInputStream inputStream = new FileInputStream(serialPort);

            // Create a buffer to read data from the serial port
            byte[] buffer = new byte[1024];

            // Read data from the serial port
            int len;
            while ((len = inputStream.read(buffer)) > 0) {
                // Process the received data here
                String data = new String(buffer, 0, len);
                System.out.print(data);
            }

            // Close the input stream
            inputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

//////////////////////////////////////////////////////////////////////////////
